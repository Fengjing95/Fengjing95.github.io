<!DOCTYPE html>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
  <meta name="baidu-site-verification" content="GdMCS2x132">
  <meta name="baidu-site-verification" content="MtlFG3tB3d">
  <!-- <link rel="shortcut icon" type="image/x-icon" href="./images/favicon.ico"> -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">webpack笔记 | 前端小枫</title>
  
  <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
  <!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
    /*Initial Variables*/
    var mashiro_option = new Object();
    var mashiro_global = new Object();
    mashiro_option.NProgressON = true;
    /* 
     * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
     * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
     */
    mashiro_option.email_domain = "";
    mashiro_option.email_name = "";
    mashiro_option.cookie_version_control = "";
    mashiro_option.qzone_autocomplete = false;
    mashiro_option.site_name = "沿途の枫景";
    mashiro_option.author_name = "枫景";
    mashiro_option.site_url = "https://easyremember.cn";
    mashiro_option.v_appId = "AdzOvpXTwwf3KAX23DOds5C9-gzGzoHsz";
    mashiro_option.v_appKey = "olX1MHfMtrQcmemwl5lLmu4a";
    mashiro_option.mathjax = "0";
    mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/";
    mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

    /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
    var bg = "https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back1.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back2.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back3.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back4.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back5.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back6.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back7.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back8.jpg".split(",");
    var bgindex = Math.floor(Math.random() * bg.length);
    if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
      alert('朋友，IE浏览器未适配哦~');
    }
  </script>
  <style type="text/css">
    .hljs-ln {
      border-collapse: collapse
    }

    .hljs-ln td {
      padding: 0
    }

    .hljs-ln-n:before {
      content: attr(data-line-number)
    }
  </style>
  <style type="text/css">
    .site-top .lower nav {
      display: block !important;
    }

    .author-profile i,
    .post-like a,
    .post-share .show-share,
    .sub-text,
    .we-info a,
    span.sitename,
    .post-more i:hover,
    #pagination a:hover,
    .post-content a:hover,
    .float-content i:hover {
      color: #FE9600
    }

    .feature i,
    .download,
    .navigator i:hover,
    .links ul li:before,
    .ar-time i,
    span.ar-circle,
    .object,
    .comment .comment-reply-link,
    .siren-checkbox-radio:checked+.siren-checkbox-radioInput:after {
      background: #FE9600
    }

    ::-webkit-scrollbar-thumb {
      background: #FE9600
    }

    .download,
    .navigator i:hover,
    .link-title,
    .links ul li:hover,
    #pagination a:hover,
    .comment-respond input[type='submit']:hover {
      border-color: #FE9600
    }

    .entry-content a:hover,
    .site-info a:hover,
    .comment h4 a,
    #comments-navi a.prev,
    #comments-navi a.next,
    .comment h4 a:hover,
    .site-top ul li a:hover,
    .entry-title a:hover,
    #archives-temp h3,
    span.page-numbers.current,
    .sorry li a:hover,
    .site-title a:hover,
    i.iconfont.js-toggle-search.iconsearch:hover,
    .comment-respond input[type='submit']:hover {
      color: #FE9600
    }

    .comments .comments-main {
      display: block !important;
    }

    .comments .comments-hidden {
      display: none !important;
    }

    background-position:center center;
    background-attachment:inherit;
    }
  </style>
</head></html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://easyremember.cn">
          <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>努力做更好的自己！</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/Fengjing95" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://weibo.com/5056791657/profile?is_all=1" target="_blank" class="social-github" title="sina">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/sina.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/my/m/music/playlist?id=2069325819" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/feng-jing-28-65" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/zhihu.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="mailto:1984779164@qq.com" target="_blank" class="social-github" title="email">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/email.svg">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/wechat.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">沿途の</span>
            <span class="shironeko">枫景</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/笔记/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          笔记
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20200908191056859.png);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20200908191056859.png">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      webpack笔记</h1>
      <p class="entry-census">
        <span>
          <a href="">
            <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
          </a>
        </span>
        <span>
          <a href="">小枫</a>
        </span>
        <span class="bull">
        ·</span>
        2020-9-8<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h2><h3 id="1-1-webpack-五个核心概念"><a href="#1-1-webpack-五个核心概念" class="headerlink" title="1.1 webpack 五个核心概念"></a>1.1 webpack 五个核心概念</h3><h4 id="1-1-1-Entry"><a href="#1-1-1-Entry" class="headerlink" title="1.1.1 Entry"></a>1.1.1 Entry</h4><p>入口，指示webpack以哪个文件为入口起点开始打包，分析构建内部依赖图</p>
<h4 id="1-1-2-Output"><a href="#1-1-2-Output" class="headerlink" title="1.1.2 Output"></a>1.1.2 Output</h4><p>输出，指示webpack打包后的资源bundles输出到哪里去，以及怎么命名</p>
<h4 id="1-1-3-Loader"><a href="#1-1-3-Loader" class="headerlink" title="1.1.3 Loader"></a>1.1.3 Loader</h4><p>加载器，可以让webpack能够去处理非js文件（webpack自身之理解javascript）</p>
<h4 id="1-1-4-Plugins"><a href="#1-1-4-Plugins" class="headerlink" title="1.1.4 Plugins"></a>1.1.4 Plugins</h4><p>插件，可以用于执行更广范围的任务，插件的范围包括从打包优化和压缩一直到重新定义环境变量等</p>
<h4 id="1-1-5-Mode"><a href="#1-1-5-Mode" class="headerlink" title="1.1.5 Mode"></a>1.1.5 Mode</h4><p>模式，指示webpack使用相应模式的配置</p>
<ul>
<li>development：能让代码本地调试运行的环境</li>
<li>production：能让代码优化上线的运行环境</li>
</ul>
<h2 id="2-webpack-初体验"><a href="#2-webpack-初体验" class="headerlink" title="2 webpack 初体验"></a>2 webpack 初体验</h2><h3 id="2-1-创建一个webpack项目"><a href="#2-1-创建一个webpack项目" class="headerlink" title="2.1 创建一个webpack项目"></a>2.1 创建一个webpack项目</h3><ol>
<li>创建一个目录，初始化包管理 <code>npm init</code> </li>
<li>运行命令<code>npm install webpack webpack-cli -D</code></li>
<li>新建src文件夹用于存放代码，新建build文件夹用于存放打包好的文件</li>
<li>编辑代码</li>
<li>运行命令（开发环境） <code>webpack ./src/index.js -o ./build/build.js --mode=development</code></li>
</ol>
<p>默认只能处理js/json文件</p>
<h3 id="2-2-打包css样式资源"><a href="#2-2-打包css样式资源" class="headerlink" title="2.2 打包css样式资源"></a>2.2 打包css样式资源</h3><ol>
<li><p>新建css文件style.css</p>
</li>
<li><p>在index.js中引入 <code>import &#39;style.css&#39;</code></p>
</li>
<li><p>创建webpack.config.js文件来配置webpack（使用commentJS）</p>
<pre><code class="js">const {
    resolve
} = require(&#39;path&#39;);

module.exports = {
    mode: &#39;development&#39;, // 模式，不能同时存在
    // mode: &#39;production&#39;
    entry: &#39;./src/index.js&#39;, // 入口文件
    output: {
        filename: &#39;built.js&#39;, // 输出文件名
        path: resolve(__dirname, &#39;build&#39;) // 输出路径
    },
    module: { // loader配置
        rules: [{
            test: /\.css$/,// css结尾的文件
            use: [// 执行顺序：从右到左，从下到上，依次执行
                &#39;style-loader&#39;,// 创建爱你style标签，将js中的样式资源插入，添加到head
                &#39;css-loader&#39;,// 将css文件变成commentjs模块加载js中，内容是字符串
            ]
        }]
    },
    plugins: [ // 插件配置

    ],
}
</code></pre>
</li>
<li><p>安装所需要的loader</p>
</li>
<li><p>运行命令 <code>webpack</code></p>
</li>
</ol>
<blockquote>
<p>使用less、scss等预编译语法需要下载对应的loader，配置方式同上，再添加一个rule对象</p>
</blockquote>
<h3 id="2-3-打包HTML文件"><a href="#2-3-打包HTML文件" class="headerlink" title="2.3 打包HTML文件"></a>2.3 打包HTML文件</h3><ol>
<li><p>安装打包html的插件 <code>npm install html-webpack-plugin-D</code></p>
</li>
<li><p>在webpack.config.js中引入并添加配置</p>
<pre><code class="js">const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
···
plugins: [ // 插件配置
    // html-webpack-plugin
    // 功能： 创建一个空的html文件引入打包之后的所有资源
    new HtmlWebpackPlugin({
        // 赋值目标文件并引入打包的资源
        template: &#39;./src/index.html&#39;
    })
],
</code></pre>
</li>
</ol>
<blockquote>
<p>在创建html模板的时候不要引入资源</p>
</blockquote>
<h3 id="2-4-打包图片文件"><a href="#2-4-打包图片文件" class="headerlink" title="2.4 打包图片文件"></a>2.4 打包图片文件</h3><p>图片添加略过，只给出配置方式</p>
<pre><code class="js">module: { // loader配置
    rules: [{
        test: /\.(jpg|png|gif|jpeg)$/,
        // 只有一个loader的时候可以直接loader+loader名
        loader: &#39;url-loader&#39;,// 下载时需要下载url-loader和file-loader
        options: {
            /**
             * 限制大小，小于限制就会被base64处理
             * 优点减少请求数量，减轻服务器压力
             * 缺点图片会更大，文件请求速度会变慢
             */
            limit: 200 * 1024
        }
    }]
},
</code></pre>
<p>如果html模板中添加了图片，添加一个额外的loader来解析</p>
<pre><code class="js">{
    test: /\.html$/,
    loader: &#39;html-withimg-loader&#39; // 处理html中的图片
}
</code></pre>
<blockquote>
<p><strong>但是</strong>，因为url-loader默认使用es6模块化解析，而html-loader引入图片是commentjs</p>
<p>解析时会出现[object Module]</p>
<p>解决办法：关闭ur-loader的ES6解析，在url-loader的options中添加 <code>esModule: false</code></p>
</blockquote>
<h3 id="2-5-打包其他资源"><a href="#2-5-打包其他资源" class="headerlink" title="2.5 打包其他资源"></a>2.5 打包其他资源</h3><pre><code class="js">{
    exclude: /\.(css|html|jpg|png|gif|jpeg)$/,
    loader: &#39;file-loader&#39;
}
</code></pre>
<p>除了这匹配到的后缀文件之外，其他的文件用file-loader打包</p>
<h3 id="2-6-使用devServer"><a href="#2-6-使用devServer" class="headerlink" title="2.6 使用devServer"></a>2.6 使用devServer</h3><p>开发服务器：用来自动编译，热更新等</p>
<p>在内存中编译打包，不会有任何输出</p>
<p>运行：webpack-dev-server</p>
<ol>
<li><p>运行<code>npm install webpack-dev-server -D</code>安装</p>
</li>
<li><p>webpack.config.js中添加配置</p>
<pre><code class="js">devServer: {
    contentBase: resolve(__dirname, &#39;build&#39;),// 项目构建后的路径
    compress: true,// 启动gzip压缩
    port: 3000,// 端口号
    open: true,// 打开默认浏览器
}
</code></pre>
</li>
<li><p>运行<code>webpack-dev-server</code></p>
</li>
</ol>
<h2 id="3-开发环境配置"><a href="#3-开发环境配置" class="headerlink" title="3 开发环境配置"></a>3 开发环境配置</h2><pre><code class="js">const {
    resolve
} = require(&#39;path&#39;);
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);

module.exports = {
    mode: &#39;development&#39;,
    // mode: &#39;production&#39;
    entry: &#39;./src/index.js&#39;,
    output: {
        filename: &#39;built.js&#39;,
        path: resolve(__dirname, &#39;build&#39;)
    },
    module: {
        rules: [{
            test: /\.css$/,
            use: [
                &#39;style-loader&#39;,
                &#39;css-loader&#39;,
            ]
        },{
            test: /\.(jpg|png|gif|jpeg)$/,
            loader: &#39;url-loader&#39;,
            options: {
                limit: 200 * 1024,
                esModule: false
            }
        },{
            test: /\.html$/,
            loader: &#39;html-loader&#39;
        }]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: &#39;./src/index.html&#39;
        })
    ],
    devServer: {
        contentBase: resolve(__dirname, &#39;build&#39;),
        compress: true,
        port: 3000,
        open: true,
    }
}
</code></pre>
<h2 id="4-生产环境搭建"><a href="#4-生产环境搭建" class="headerlink" title="4 生产环境搭建"></a>4 生产环境搭建</h2><h3 id="4-1-提取css成单独文件"><a href="#4-1-提取css成单独文件" class="headerlink" title="4.1 提取css成单独文件"></a>4.1 提取css成单独文件</h3><ol>
<li><p>安装插件 <code>npm install mini-css-extract-plugin -D</code></p>
</li>
<li><p>修改webpack.config.js配置文件</p>
<pre><code class="js">const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
···
    module: {
        rules: [{
            test: /\.css$/,
            use: [
                // &#39;style-loader&#39;,
                MiniCssExtractPlugin.loader,// 替换style-loader，提取css成单独文件
                &#39;css-loader&#39;, 
            ]
        },
        ···]
    },
    plugins: [ 
        ···
        new MiniCssExtractPlugin({
            filename: &#39;css/style.css&#39;
        })
    ],
</code></pre>
</li>
<li><p>运行打包命令</p>
</li>
</ol>
<h3 id="4-2-css兼容性处理"><a href="#4-2-css兼容性处理" class="headerlink" title="4.2 css兼容性处理"></a>4.2 css兼容性处理</h3><p>使用到postcss</p>
<ol>
<li><p>运行 <code>npm install postcss-loader postcss-preset-env -D</code></p>
</li>
<li><p>修改webpack.config.js的css相关部分配置</p>
<pre><code class="js">{
    test: /\.css$/, 
    use: [
        MiniCssExtractPlugin.loader,
        &#39;css-loader&#39;,
        {
            loader: &#39;postcss-loader&#39;,
            options: {
                ident: &#39;postcss&#39;,
                plugins: () =&gt; [
                    require(&#39;postcss-preset-env&#39;)()
                ]
            }
        }
    ]
}
</code></pre>
</li>
<li><p>在package.json中添加浏览器版本控制</p>
<pre><code class="json">&quot;browerslist&quot;: {
    &quot;development&quot;: [
          &quot;last 1 chrome version&quot;,
          &quot;last 1 firefox version&quot;,
          &quot;last 1 safair version&quot;
    ],
    &quot;production&quot;: [
          &quot;&gt;0.2%&quot;,
         &quot;not dead&quot;,
          &quot;not op_mini all&quot;
    ]
}
</code></pre>
</li>
<li><p>运行打包</p>
</li>
</ol>
<h3 id="4-3-压缩css"><a href="#4-3-压缩css" class="headerlink" title="4.3 压缩css"></a>4.3 压缩css</h3><p>使用插件 <code>optimize-css-assets-webpack-plugin</code></p>
<ol>
<li><p>运行<code>npm install optimize-css-assets-webpack-plugin -D</code></p>
</li>
<li><p>webpack.config.js中引入</p>
<pre><code class="js">const OptimizeCssAssetsWebpackPlugin = require(&#39;optimize-css-assets-webpack-plugin&#39;);
···
plugins: [
    ···
    new OptimizeCssAssetsWebpackPlugin()
]
</code></pre>
</li>
</ol>
<h3 id="4-4-js语法检查"><a href="#4-4-js语法检查" class="headerlink" title="4.4 js语法检查"></a>4.4 js语法检查</h3><p>使用eslint，使用airbnb规则检查js语法</p>
<ol>
<li><p>运行 <code>npm install eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import -D</code>安装所需的依赖和插件</p>
</li>
<li><p>在package.json中设置eslintConfig，继承airbnb</p>
<pre><code class="json">&quot;eslintConfig&quot;: {
  &quot;extends&quot;: &quot;airbnb-base&quot;
}
</code></pre>
</li>
<li><p>webpack.config.js中添加rules</p>
<pre><code class="js">{
    test: /\.js$/,
    exclude: /node_modules/,// 只检查自己的代码，不检查第三方库中的代码
    loader: &#39;eslint-loader&#39;,
    options: {
        fix: true// 自动修复eslint错误
    }
}
</code></pre>
</li>
<li><p>使用 <code>// eslint-disable-next-line</code>控制下一行不进行检查</p>
</li>
</ol>
<h3 id="4-5-js兼容性处理"><a href="#4-5-js兼容性处理" class="headerlink" title="4.5 js兼容性处理"></a>4.5 js兼容性处理</h3><p>使用babel-loader进行兼容性处理</p>
<ol>
<li><p>运行 <code>npm install babel-loader @babel/core @babel/preset-env @babel/polyfill -D</code></p>
</li>
<li><p>添加webpack.config.js的rules</p>
<pre><code class="js">{
    test: /\.js$/,
     exclude: /node_modules/,
    loader: &#39;babel-loader&#39;,
    options: {
        presets: [&#39;@babel/preset-env&#39;]
    }
},
</code></pre>
</li>
</ol>
<blockquote>
<p>@babel/polyfill属于高级语法支持，在需要兼容的js文件中引入即可</p>
<p>import ‘@babel/polyfill’</p>
</blockquote>
<p>@babel/polyfill属于暴力支持，回事打包文件变的非常大，所以一般采用按需加载的方式：core.js</p>
<ol>
<li><p>运行 <code>npm install corejs -D</code></p>
</li>
<li><p>修改之前的兼容性配置规则</p>
<pre><code class="js">{
    test: /\.js$/,
    exclude: /node_modules/,
    loader: &#39;babel-loader&#39;,
    options: {
        presets: [
            [
                &#39;@babel/preset-env&#39;,
                {
                    useBuiltIns: &#39;usage&#39;,// 按需加载
                    corejs: {
                        version: 3
                    },
                    targets: {// 制定兼容浏览器版本
                        chrome: &#39;60&#39;,
                        firefox: &#39;50&#39;,
                        ie: &#39;9&#39;,
                        safari: &#39;10&#39;
                    }
                }
            ]
        ]
    }
},
</code></pre>
</li>
</ol>
<h3 id="4-6-HTML和js压缩"><a href="#4-6-HTML和js压缩" class="headerlink" title="4.6 HTML和js压缩"></a>4.6 HTML和js压缩</h3><h4 id="4-6-1-js压缩"><a href="#4-6-1-js压缩" class="headerlink" title="4.6.1 js压缩"></a>4.6.1 js压缩</h4><p>将模式调整为<code>production</code>即可实现js代码压缩</p>
<h4 id="4-6-2-HTML压缩"><a href="#4-6-2-HTML压缩" class="headerlink" title="4.6.2 HTML压缩"></a>4.6.2 HTML压缩</h4><p>在html的插件中添加设置</p>
<pre><code class="js">new HtmlWebpackPlugin({
    // 复制目标文件并引入打包的资源
    template: &#39;./src/index.html&#39;,
    minify: {
        // 移除空格
        collapseWhitespace: true,
        // 移除注释
        removeComments: true
    }
}),
</code></pre>
<h2 id="5-生产环境配置"><a href="#5-生产环境配置" class="headerlink" title="5 生产环境配置"></a>5 生产环境配置</h2><pre><code class="js">const {
    resolve
} = require(&#39;path&#39;);
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);
const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);
const OptimizeCssAssetsWebpackPlugin = require(&#39;optimize-css-assets-webpack-plugin&#39;);

module.exports = {
    entry: &#39;./src/index.js&#39;,
    output: {
        filename: &#39;js/built.js&#39;,
        path: resolve(__dirname, &#39;build&#39;)
    },
    module: { // loader配置
        rules: [{
                test: /\.css$/, 
                use: [
                    MiniCssExtractPlugin.loader,
                    &#39;css-loader&#39;,
                    {
                        loader: &#39;postcss-loader&#39;,
                        options: {
                            ident: &#39;postcss&#39;,
                            plugins: () =&gt; [
                                require(&#39;postcss-preset-env&#39;)()
                            ]
                        }
                    }
                ]
            }, {
                test: /\.(jpg|png|gif|jpeg)$/,
                loader: &#39;url-loader&#39;,
                options: {
                    limit: 200 * 1024,
                    esModule: false
                }
            }, {
                test: /\.html$/,
                loader: &#39;html-loader&#39;
            },
            {
                test: /\.js$/,
                exclude: /node_modules/,
                enforce: &#39;pre&#39;,// 优先执行
                loader: &#39;eslint-loader&#39;,
                options: {
                    fix: true
                }
            }, {
                test: /\.js$/,
                exclude: /node_modules/,
                loader: &#39;babel-loader&#39;,
                options: {
                    presets: [
                        [
                            &#39;@babel/preset-env&#39;,
                            {
                                useBuiltIns: &#39;usage&#39;,
                                corejs: {
                                    version: 3
                                },
                                targets: {
                                    chrome: &#39;60&#39;,
                                    firefox: &#39;50&#39;,
                                    ie: &#39;9&#39;,
                                    safari: &#39;10&#39;
                                }
                            }
                        ]
                    ]
                }
            },
        ]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: &#39;./src/index.html&#39;,
            minify: {
                collapseWhitespace: true,
                removeComments: true
            }
        }),
        new MiniCssExtractPlugin({
            filename: &#39;css/style.css&#39;
        }),
        new OptimizeCssAssetsWebpackPlugin()
    ],
    devServer: {
        contentBase: resolve(__dirname, &#39;build&#39;),
        compress: true,
        port: 3000,
        open: true,
    },
    // mode: &#39;development&#39;,
    mode: &#39;production&#39;,
}
</code></pre>
<blockquote>
<p>babel和eslint可能会产生冲突使用enforce: ‘pre’让eslint先执行</p>
</blockquote>
<h2 id="6-性能优化篇"><a href="#6-性能优化篇" class="headerlink" title="6 性能优化篇"></a>6 性能优化篇</h2><h3 id="6-1-开发环境性能优化"><a href="#6-1-开发环境性能优化" class="headerlink" title="6.1 开发环境性能优化"></a>6.1 开发环境性能优化</h3><h4 id="6-1-1-优化打包构建速度"><a href="#6-1-1-优化打包构建速度" class="headerlink" title="6.1.1 优化打包构建速度"></a>6.1.1 优化打包构建速度</h4><h5 id="6-1-1-1HMR——hot-module-replacement（模块热替换）"><a href="#6-1-1-1HMR——hot-module-replacement（模块热替换）" class="headerlink" title="6.1.1.1HMR——hot module replacement（模块热替换）"></a>6.1.1.1HMR——hot module replacement（模块热替换）</h5><p>只会重新打包这一个模块，不会重新打包</p>
<p>配置devServer</p>
<pre><code class="js">devServer: {
    contentBase: resolve(__dirname, &#39;build&#39;),
    compress: true, // 启动gzip压缩
    port: 3000, // 端口号
    open: true, // 打开默认浏览器
    hot: true,// 开启热更新
},
</code></pre>
<blockquote>
<p>样式文件热更新基于’style-loader’；</p>
<p>js文件默认不能使用HMR功能；</p>
<p>HTML文件默认不能使用HMR功能，同时会导致问题，HTML文件不能热更新，解决办法：修改entry入口，将html文件引入（不需要做HMR）</p>
</blockquote>
<h5 id="6-1-1-2-oneOf减少loader检索"><a href="#6-1-1-2-oneOf减少loader检索" class="headerlink" title="6.1.1.2 oneOf减少loader检索"></a>6.1.1.2 oneOf减少loader检索</h5><p>每个文件在检索的的时候会每个rules都验证一遍，将所有的rules都放到oneOf中就可以验证到所在的规则不再继续验证</p>
<p>这样出现了问题，js可能会有多个loader，解决办法：oneOf中保留一条rule，其他的取出来与oneOf平级</p>
<h4 id="6-1-2-优化代码调试"><a href="#6-1-2-优化代码调试" class="headerlink" title="6.1.2 优化代码调试"></a>6.1.2 优化代码调试</h4><p>source-map：提供语言代码构建后代码映射技术（构建代码出错，追踪源代码错误）</p>
<p>添加devtool</p>
<pre><code class="js">devtool: &#39;source-map&#39;,
</code></pre>
<p><code>[inline- |hidden- | eval-][nosources-][cheap-[module-]]source-map</code>分别对应：</p>
<ul>
<li><p>inline-内联：（汇集在一起）错误代码准确信息和源代码错误位置</p>
</li>
<li><p>hidden-外部：代码错误原因，没有错误位置，不能追踪代码错误</p>
</li>
<li><p>eval-内联：（分别跟每个文件对应）错误代码准确信息和源代码错误位置（位置信息是哈希值）</p>
</li>
<li><p>nosources-外部：错误代码准确信息，没有源代码错误信息</p>
</li>
<li><p>cheap-外部：错误代码准确信息和源代码错误位置（只精确到行，提示整行错误）</p>
</li>
<li><p>cheap-module-外部：错误代码准确信息和源代码错误位置</p>
</li>
<li><p>source-map`外部：错误代码准确信息和源代码错误位置：</p>
</li>
</ul>
<p>模式使用</p>
<ul>
<li><p>开发环境：速度快，开发更友好</p>
<ul>
<li>速度快eval&gt;inline&gt;cheap&gt;···<ul>
<li>eval-cheap-source-map</li>
<li>eval-source-map</li>
</ul>
</li>
<li>调试更友好<ul>
<li>source-map</li>
<li>cheap-module-source-map</li>
<li>cheap-source-map</li>
</ul>
</li>
</ul>
<p>–&gt;eval-source-map / eval-cheap-module-source-map</p>
</li>
<li><p>生产环境：源代码要不要隐藏</p>
<ul>
<li>内联会让代码体积变大，使用外部方式<ul>
<li>source-map</li>
<li>···</li>
</ul>
</li>
<li>隐藏代码<ul>
<li>nosource-source-map// 全部隐藏</li>
<li>hidden-source-map// 隐藏源代码</li>
</ul>
</li>
</ul>
<p>–&gt;source-map / cheap-module-source-map</p>
</li>
</ul>
<h3 id="6-2生产环境性能优化"><a href="#6-2生产环境性能优化" class="headerlink" title="6.2生产环境性能优化"></a>6.2生产环境性能优化</h3><h4 id="缓存机制"><a href="#缓存机制" class="headerlink" title="缓存机制"></a>缓存机制</h4><h5 id="babel缓存"><a href="#babel缓存" class="headerlink" title="babel缓存"></a>babel缓存</h5><p>修改js打包配置，开启缓存</p>
<pre><code class="js">{
    test: /\.js$/,
    exclude: /node_modules/,
    loader: &#39;babel-loader&#39;,
    options: {
        presets: [
            [
                &#39;@babel/preset-env&#39;,
                {
                    useBuiltIns: &#39;usage&#39;, // 按需加载
                    corejs: {
                        version: 3
                    },
                    targets: { // 制定兼容浏览器版本
                        chrome: &#39;60&#39;,
                        firefox: &#39;50&#39;,
                        ie: &#39;9&#39;,
                        safari: &#39;10&#39;
                    }
                }
            ]
        ],
        cacheDirectory: true// 开启缓存
    }
},
</code></pre>
<blockquote>
<p>强缓存模式，所有的数据都要缓存，从新打包之后不会试用新的文件</p>
</blockquote>
<h5 id="文件资源缓存"><a href="#文件资源缓存" class="headerlink" title="文件资源缓存"></a>文件资源缓存</h5><h6 id="hash"><a href="#hash" class="headerlink" title="hash"></a>hash</h6><p>这里修改输出文件名，每次到打包之后的文件都不一样，这就不加绝了强制缓存带来的不刷新了（取10位hash值）</p>
<pre><code class="js">output: {
    filename: &#39;js/built[hash:10].js&#39;, // 输出文件名
    path: resolve(__dirname, &#39;build&#39;) // 输出路径
},
</code></pre>
<blockquote>
<p>所有的js和css文件共用一个哈希值，重新打包会导致所有的缓存失效</p>
</blockquote>
<h6 id="chunkhash"><a href="#chunkhash" class="headerlink" title="chunkhash"></a>chunkhash</h6><p>根据chunk生成的hash值，如果打包源来自同一个chunk，那么hash值相同</p>
<p>此时，js和css的hash值还是相同，因为css是在js中引入的，同属于一个chunk</p>
<h6 id="contenthash"><a href="#contenthash" class="headerlink" title="contenthash"></a>contenthash</h6><p>根据文件内容生成hash，不同文件hash值一定不一样</p>
<pre><code class="js">filename: &#39;js/built[contenthash:10].js&#39;
</code></pre>
<blockquote>
<p>如果单独提取了css，css命名修改为</p>
<pre><code class="js">new MiniCssExtractPlugin({
    filename: &#39;css/style-[contenthash:10].css&#39;
})
</code></pre>
</blockquote>
<h4 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree shaking"></a>tree shaking</h4><p>去除无用代码</p>
<ol>
<li>必须使用ES6模块化</li>
<li>开启production环境</li>
</ol>
<p>打包是会自动摇去没有用的叶子</p>
<p>在package.json中配置<code>&quot;sideEffects&quot;: false</code>所有代码都没有副作用</p>
<p>​    问题：可能会把css文件干掉，解决<code>&quot;sideEffects&quot;: [&quot;*.css&quot;]</code></p>
<h4 id="code-split"><a href="#code-split" class="headerlink" title="code split"></a>code split</h4><p>文件分割</p>
<ul>
<li><p>多入口文件分割</p>
</li>
<li><p>添加webpack.config.js配置项，将node中的代码单独打包一个chunks，自动分析多入口文件中有没有公共文件，如果有会单独打包成一个chunk</p>
</li>
</ul>
<pre><code class="js">optimization: {
    splitChunks: {
        chunks: &#39;all&#39;
    }
},
</code></pre>
<ul>
<li>通过js代码，让某个文件单独打包成一个chunk</li>
</ul>
<h4 id="懒加载、预加载"><a href="#懒加载、预加载" class="headerlink" title="懒加载、预加载"></a>懒加载、预加载</h4><h5 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h5><pre><code class="js">document.getElementById(&#39;btn&#39;).onclick = function() {
    import(/* webpackChunkName: &#39;test&#39;*/&#39;./js/test.js&#39;)
        .then(({mul}) =&gt; {
            console.log(mul(4, 5));
        })
}
</code></pre>
<p>将引入放在事件的回调函数中，事件触发时才加载js文件</p>
<blockquote>
<p>配合eslint语法检查是有问题的，在.eslintrc文件汇总设置 <code>&quot;allowImportExportEverywher&quot;: true</code>，允许在任何地方import</p>
</blockquote>
<h5 id="预加载"><a href="#预加载" class="headerlink" title="预加载"></a>预加载</h5><p>将引入改为</p>
<pre><code class="js">import(/* webpackChunkName: &#39;test&#39;, webpackPrefetch: true */&#39;./js/test.js&#39;)
</code></pre>
<p>预加载会提前将js文件加载</p>
<h5 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h5><ul>
<li>懒加载：文件需要才加载</li>
<li>预加载：使用之前加载，浏览器空闲再加载（兼容性较差）</li>
<li>正常加载：并行加载</li>
</ul>
<h4 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h4><p>渐进式网络开发应用程序（离线可访问）</p>
<p>​    workbox–&gt;workbox-webpack-plugin</p>
<ol>
<li><p>运行 <code>npm install workbox-webpack-plugin -D</code></p>
</li>
<li><p>修改webpack.config.js配置</p>
<pre><code class="js">const WorkboxWebpackPlugin = require(&#39;workbox-webpack-plugin&#39;);
···
plugin: [
    ···
    new WorkboxWebpackPlugin.GenerateSW({
        clientsClaim: true,
        skipWaiting: true
    })
]
</code></pre>
<p>帮助serviceworker快速启动；删除旧的serviceworker</p>
</li>
<li><p>在入口文件中注册serviceworker，处理兼容</p>
<pre><code class="js">if(&#39;serviceWorker&#39; in navigator) {
    window.addEventListener(&#39;load&#39;, () =&gt; {
        navigator.serviceWorker.register(&#39;./service-worker.js&#39;)
            .then(() =&gt; {
            console.log(&#39;sw注册成功&#39;)
        }).catch(() =&gt; {
            console.log(&#39;sw注册失败&#39;)
        })
    })
}
</code></pre>
</li>
<li><p>eslint不识别window，navigator等全局变量，修改package.json配置</p>
<pre><code class="json">&quot;eslintConfig&quot;: {
    &quot;extends&quot;: &quot;airbnb-base&quot;,
    &quot;env&quot;: {
        &quot;browser&quot;: true// 支持浏览器全局变量
    }
}
</code></pre>
</li>
<li><p>构建代码</p>
</li>
</ol>
<h4 id="多进程打包"><a href="#多进程打包" class="headerlink" title="多进程打包"></a>多进程打包</h4><p>消耗时间长的才需要多进程打包，多进程开始需要时间，进程通信也需要时间</p>
<ol>
<li><p>运行<code>npm install thread-loader -D</code></p>
</li>
<li><p>修改webpack.config.js中babel所在的rule</p>
<pre><code class="js">{
    test: /\.js$/,
    exclude: /node_modules/,
    use: [
        {
            loader: &#39;thread-loader&#39;,// 多进程打包
            options: {
                workers: 2,// 使用两个进程
            }
        },
        {
            loader: &#39;babel-loader&#39;,
            ···
        }
    ]
},
</code></pre>
</li>
</ol>
<h4 id="externals"><a href="#externals" class="headerlink" title="externals"></a>externals</h4><p>忽略某些包，比如CDN引入的</p>
<p>在webpack.config.js第一级目录下添加</p>
<pre><code class="js">externals: {
    // 包名： npm库名
    jquery: &#39;jQuery&#39;
}
</code></pre>
<h4 id="dll"><a href="#dll" class="headerlink" title="dll"></a>dll</h4><ol>
<li><p>新建一个配置文件，例如 <code>webpack.dll.js</code></p>
<pre><code class="js">const {resolve} = require(&#39;path&#39;);
const webpack = require(&#39;webpack&#39;);

module.exports = {
    entry: {
        // [name]: 要打包的库名
        jquery: [&#39;jquery&#39;]
    },
    output: {
        filename: &#39;[name].js&#39;,
        path: resolve(__dirname, &#39;dll&#39;),
        library: &#39;[name]_[hash]&#39;// 打包库里暴露的内容叫什么名
    },
    plugins: [
        // 打包生成一个映射关系
        new webpack.DllPlugin({
            name: &#39;[name]_[hash]&#39;,// 映射库暴露的内容名称
            path: resolve(__dirname, &#39;dll/manifast.json&#39;)// 输出文件路径
        })
    ],
    mode: &#39;production&#39;
}
</code></pre>
</li>
<li><p>运行命令 <code>webpack --config webpack.dll.js</code></p>
</li>
<li><p>运行 <code>npm install add-asset-html-webpack-plugin -D</code></p>
</li>
<li><p>修改<code>webpack.config.js</code>配置</p>
<pre><code class="js">const webpack = require(&#39;webpack&#39;);
const AddAssetHtmlWebpackPlugin = require(&#39;add-asset-html-webpack-plugin&#39;);
···
plugins: [
    ···
    // 告诉webpack那些文件不需要打包，以及映射关系
    new webpack.DllReferencePlugin({
        manifest: resolve(__dirname, &#39;dll/manifest&#39;)
    }),
    // 将文件打包输出，并在html自动引入该文件
    new AddAssetHtmlWebpackPlugin({
        filepath: resolve(__dirname, &#39;dll/&#39;)
    })
]
</code></pre>
</li>
</ol>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2020/09/09/资源/hexo博客SEO优化/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20200909112753909.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20200909112753909.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                hexo博客SEO优化</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2020/09/08/笔记/pug模板渲染/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/puglog.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/puglog.jpg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                pug模板渲染</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg" itemprop="image" alt="小枫" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author">小枫</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>前端小白</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 小枫<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy2020 | <a href="http://beian.miit.gov.cn">鲁ICP备19019592号-2</a></p>
    </div>
    <div class="footer-device">
      <p style="font-family: 'Ubuntu', sans-serif;">
        
        <script src="/libsuanzi.pure.js"></script>
        
        
        
        
        <span id="busuanzi_container_site_pv" style="display:none">
          本站总访问量<span id="busuanzi_value_site_pv"></span>次
          <span class="post-meta-divider">|</span>
        </span>
        <span id="busuanzi_container_site_uv" style='display:none'>
          本站访客数<span id="busuanzi_value_site_uv"></span>人
        </span>
        
      </p>
      <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i
            class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a
            href="https://2heng.xin/" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a
            href="https://www.hojun.cn/" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo,
          Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>





<!-- <script src="/js/tocbot.js"></script> -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js"></script>

<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
  /* <![CDATA[ */
  if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
    var Poi = { "pjax": "1", "movies": { "url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.21", "name": "Unbroken.mp4", "live": "close" }, "windowheight": "fixed", "codelamp": "close", "ajaxurl": "", "order": "asc", "formpostion": "bottom" };
  } else {
    var Poi = { "pjax": "1", "movies": { "url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.21", "name": "Unbroken.mp4", "live": "open" }, "windowheight": "auto", "codelamp": "close", "ajaxurl": "", "order": "asc", "formpostion": "bottom" };
  }
/* ]]> */

</script>
<script>
  $(document).ready(function () {
    if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
      if ($(".pattern-center").length > 0) { //有图的情况
        tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
        });
      } else {
        tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
        });
      }
      var offsetTop = $('.toc').offset().top - 95;
      window.onscroll = function () {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop >= offsetTop) {
          $('.toc').addClass('toc-fixed');
        } else {
          $('.toc').removeClass('toc-fixed');
        }
      }
    }
  });
</script>
    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">沿途の枫景</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="https://github.com/Fengjing95" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://weibo.com/5056791657/profile?is_all=1" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=1984779164&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/笔记/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  笔记
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>