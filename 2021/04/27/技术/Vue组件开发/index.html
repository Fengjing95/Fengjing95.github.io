<!DOCTYPE html>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
  <meta name="baidu-site-verification" content="GdMCS2x132">
  <meta name="baidu-site-verification" content="MtlFG3tB3d">
  <!-- <link rel="shortcut icon" type="image/x-icon" href="./images/favicon.ico"> -->
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">Vue组件库开发 | 前端小枫</title>
  
  <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
  <!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
    /*Initial Variables*/
    var mashiro_option = new Object();
    var mashiro_global = new Object();
    mashiro_option.NProgressON = true;
    /* 
     * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
     * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
     */
    mashiro_option.email_domain = "";
    mashiro_option.email_name = "";
    mashiro_option.cookie_version_control = "";
    mashiro_option.qzone_autocomplete = false;
    mashiro_option.site_name = "沿途の枫景";
    mashiro_option.author_name = "枫景";
    mashiro_option.site_url = "https://easyremember.cn";
    mashiro_option.v_appId = "AdzOvpXTwwf3KAX23DOds5C9-gzGzoHsz";
    mashiro_option.v_appKey = "olX1MHfMtrQcmemwl5lLmu4a";
    mashiro_option.mathjax = "0";
    mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/";
    mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

    /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
    var bg = "https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back7.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back8.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back11.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back12.jpg,https://gitee.com/liuhao1108/picGoCDN/raw/master/img/back13.jpg".split(",");
    var bgindex = Math.floor(Math.random() * bg.length);
    if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
      alert('朋友，IE浏览器未适配哦~');
    }
  </script>
  <style type="text/css">
    .hljs-ln {
      border-collapse: collapse
    }

    .hljs-ln td {
      padding: 0
    }

    .hljs-ln-n:before {
      content: attr(data-line-number)
    }
  </style>
  <style type="text/css">
    .site-top .lower nav {
      display: block !important;
    }

    .author-profile i,
    .post-like a,
    .post-share .show-share,
    .sub-text,
    .we-info a,
    span.sitename,
    .post-more i:hover,
    #pagination a:hover,
    .post-content a:hover,
    .float-content i:hover {
      color: #FE9600
    }

    .feature i,
    .download,
    .navigator i:hover,
    .links ul li:before,
    .ar-time i,
    span.ar-circle,
    .object,
    .comment .comment-reply-link,
    .siren-checkbox-radio:checked+.siren-checkbox-radioInput:after {
      background: #FE9600
    }

    ::-webkit-scrollbar-thumb {
      background: #FE9600
    }

    .download,
    .navigator i:hover,
    .link-title,
    .links ul li:hover,
    #pagination a:hover,
    .comment-respond input[type='submit']:hover {
      border-color: #FE9600
    }

    .entry-content a:hover,
    .site-info a:hover,
    .comment h4 a,
    #comments-navi a.prev,
    #comments-navi a.next,
    .comment h4 a:hover,
    .site-top ul li a:hover,
    .entry-title a:hover,
    #archives-temp h3,
    span.page-numbers.current,
    .sorry li a:hover,
    .site-title a:hover,
    i.iconfont.js-toggle-search.iconsearch:hover,
    .comment-respond input[type='submit']:hover {
      color: #FE9600
    }

    .comments .comments-main {
      display: block !important;
    }

    .comments .comments-hidden {
      display: none !important;
    }

    background-position:center center;
    background-attachment:inherit;
    }
  </style>
</head></html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://easyremember.cn">
          <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>努力做更好的自己！</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/Fengjing95" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://weibo.com/5056791657/profile?is_all=1" target="_blank" class="social-github" title="sina">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/sina.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/my/m/music/playlist?id=2069325819" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/feng-jing-28-65" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/zhihu.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="mailto:1984779164@qq.com" target="_blank" class="social-github" title="email">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/email.svg">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/social/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/wechat.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">沿途の</span>
            <span class="shironeko">枫景</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/笔记/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          笔记
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://gitee.com/liuhao1108/picGoCDN/raw/master/img/1619419113164-1.jpg);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/1619419113164-1.jpg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      Vue组件库开发</h1>
      <p class="entry-census">
        <span>
          <a href="">
            <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
          </a>
        </span>
        <span>
          <a href="">小枫</a>
        </span>
        <span class="bull">
        ·</span>
        2021-4-27<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h2 id="技术铺垫"><a href="#技术铺垫" class="headerlink" title="技术铺垫"></a>技术铺垫</h2><p>本节内容以技术铺垫为主，如果你对这里的内容非常自信可以跳到下一节，当然也可以帮我找找错😂</p>
<h3 id="必要性"><a href="#必要性" class="headerlink" title="必要性"></a>必要性</h3><p>随着Vue在国内市场的占有率越来越高，组件库同时也火了起来，很多公司内部也为了适应其自身业务而开始开发其自有的组件库，我们现在使用的Element UI（饿了么）、Nut UI（京东）等组件库都是大厂开源出来的组件库。与此同时，拥有组件库开发经验也已经成为了我们在应聘面试中的加分项。</p>
<p>组件库中的组件开发其实给跟我们平常开发组件本质是相同的，只不过我们需要尽可能地考虑到组件的复用性，使组件可以面对多种情况下的业务需求，而且组件库不能和业务耦合，应该和业务完全脱离，即使切换另一种业务也可以使用。</p>
<h3 id="基础API"><a href="#基础API" class="headerlink" title="基础API"></a>基础API</h3><p>组件的开发脱离不开prop、slot和event这三个API，此外还要考虑组件之间的通信，比如form和form-item、checkbox和checkbox-group等，他们之间其实是有联系的</p>
<h4 id="prop"><a href="#prop" class="headerlink" title="prop"></a>prop</h4><p>prop在我们平常的开发任务中也是经常使用的一个API，用于子组件接受父组件传递的参数，尽管日常使用，但是还是有人在规范性等方面用得并不是很好。</p>
<p>抛弃数组写法：虽然支持数组写法，但是官方都不推荐的数组写方法就扔掉吧</p>
<pre><code class="javascript">// 摒弃吧
// props: [&#39;status&#39;]
// 至少也这样吧
props: {
    status: String
    // 等同于
    // status: {
    //     type: String
    // }
}
</code></pre>
<p>键值的写法只是提供了类型限制，除此之外，prop还有其他的属性，比如必填项以及内容验证等；validator的值是一个函数，可以将当前prop接受的值传递给函数，返回值如果是一个失败类型的值就会在控制台抛出异常</p>
<p>下面的验证规则限制了status必须是’success’, ‘warning’, ‘error’中的一个</p>
<pre><code class="javascript">props: {
  status: {
    type: String,
    validator: function(prop) {
      return [
        &#39;success&#39;,
        &#39;warning&#39;,
        &#39;error&#39;
      ].indexOf(prop) &gt;= 0
    },
    default: &#39;success&#39;,
    required: true,
    // 一般默认值不会和必填项同时出现
  }
}
</code></pre>
<p>然后我在使用组件时传入一个错误的值</p>
<pre><code class="html">&lt;message status=&quot;warning1&quot; /&gt;
</code></pre>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210426153900-2.png" alt="QQ截图20210426153900-2"></p>
<p>此外还有一点，<strong>子组件不能直接修改接收的prop值</strong></p>
<h4 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h4><p>我理解的slot作用就是在子组件中插入父组件的内容，子组件在定义时提供一个插槽，父组件在使用子组件时可以向插槽中插入内容。相当于插座和插头，下面这张图类似于具名插槽，父组件使用的插槽名和子组件中的插槽名不匹配，就无法使用</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210426160950-3.png" alt="QQ截图20210426160950-3"></p>
<p>普通的插槽很简单，在子组件中声明插槽，父组件直接添加内容即可，插槽可以设置默认内容，当父组件没有内容传进来时，就会使用默认内容，类似于prop的default属性</p>
<pre><code class="html">&lt;!-- 父组件 --&gt;
&lt;message&gt;
    我是父组件的内容
&lt;/message&gt;
&lt;!-- 子组件 --&gt;
&lt;div&gt;
    接受插槽：
    &lt;slot&gt;后备内容&lt;/slot&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210426161838-4.png" alt="QQ截图20210426161838-4"></p>
<p>在上面我们提到了具名插槽，其实就是为了有多个插槽内容时区分内容。使用方法也很简单，在子组件声明slot时添加name属性即可，父组件在使用时添加v-slot:[name]属性（原来是slot=”name”，已废弃但没有删除，现阶段这样用也可以）</p>
<pre><code class="html">&lt;!-- 父组件 --&gt;
&lt;message status=&quot;warning&quot;&gt;
  &lt;template v-slot:header&gt;我是父组件的头部内容&lt;/template&gt;
  &lt;template v-slot:footer&gt;我是父组件的底部内容&lt;/template&gt;
&lt;/message&gt;
&lt;!-- 子组件 --&gt;
&lt;div&gt;
  头部插槽：
  &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;
  &lt;br /&gt;
  底部插槽：
  &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210426162400-5.png" alt="QQ截图20210426162400-5"></p>
<p>不添加name属性时，默认会赋值name=”default”，父组件在使用时不添加v-slot属性默认就是v-slot:default，所以普通插槽也相当于具名插槽，只是默认名。下面两种用法是一样的</p>
<pre><code class="html">&lt;message status=&quot;warning&quot;&gt;
  &lt;template v-slot:default&gt;我是父组件的内容&lt;/template&gt;
&lt;/message&gt;

&lt;message status=&quot;warning&quot;&gt;
  &lt;template&gt;我是父组件的内容&lt;/template&gt;
&lt;/message&gt;
</code></pre>
<p>还有一种作用域插槽，用简单的话来说就是，在父组件中使用子组件的数据，这里的作用域也就是指的父组件接收子组件作用域</p>
<p>子组件在声明插槽时绑定一个变量，父组件在使用插槽时使用v-slot=”props”接受这个变量（原来是slot-scope，同样已废弃），然后使用变量我们继续使用上面的例子稍加改造</p>
<pre><code class="html">&lt;!-- 父组件 --&gt;
&lt;message status=&quot;warning&quot;&gt;
  &lt;template v-slot:header=&quot;sonData&quot;&gt;{{sonData.user.name}}今年{{sonData.user.age}}岁了&lt;/template&gt;
  &lt;template v-slot:footer&gt;我是父组件的底部内容&lt;/template&gt;
&lt;/message&gt;
&lt;!-- 子组件 --&gt;
&lt;div&gt;
  头部插槽：
  &lt;slot name=&quot;header&quot; :user=&quot;user&quot;&gt;&lt;/slot&gt;
  &lt;br /&gt;
  底部插槽：
  &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210426164339-6.png" alt="QQ截图20210426164339-6"></p>
<blockquote>
<p>v-slot指令可以缩写为<code>#</code>，比如v-slot:header可以缩写为#header，默认插槽不可以简写，但是你可以使用#default</p>
</blockquote>
<h4 id="event"><a href="#event" class="headerlink" title="event"></a>event</h4><p>事件这一块内容虽然很简单，但说起来比较琐碎，看<a href="https://cn.vuejs.org/v2/guide/events.html" target="_blank" rel="noopener">文档</a>吧😂</p>
<p>此外你还需要了解组件之间的通信，组件之间的通讯大致有ABCD这几种情况（大体列一下，不展开细说了）</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/3174701-7a15ec352b4e7d84-7.png" alt="3174701-7a15ec352b4e7d84-7"></p>
<p>AB之间父子关系，AC和AD时祖先和后代的关系，CD之间是兄弟关系</p>
<ul>
<li>props/$emit，用于父子之间通信</li>
<li>$on/$emit，可以在任意组件之间通信</li>
<li>$children/$parent，可用于父子组件</li>
<li>$ref，通过标记来获取组件实例</li>
<li>$attrs/$listeners，attrs包含了父作用域中不被 prop 所识别的属性，listeners包含了父作用域中的 (不含 .native 修饰器的) 事件监听器</li>
<li>provide/inject，可以在祖孙之间传递数据</li>
</ul>
<h2 id="实战一，Form组件"><a href="#实战一，Form组件" class="headerlink" title="实战一，Form组件"></a>实战一，Form组件</h2><p>上一节我们为组件开发做了技术铺垫，这一节开始我们来进入实战环节</p>
<p>首先我们来实现一套Form组件，如果你使用过市面上比较流行的组件库，你应该知道一套Form组件应该包含这样的内容</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427095149-8.png" alt="QQ截图20210427095149-8"></p>
<p>那么我们首先下一个用例，从用例出发，倒推组件</p>
<pre><code class="html">&lt;f-form :model=&quot;userForm&quot; :rules=&quot;rules&quot;&gt;
  &lt;f-form-item label=&quot;用户名&quot; prop=&quot;username&quot;&gt;
    &lt;f-input v-model=&quot;userForm.username&quot; placeholder=&quot;请输入用户名&quot; /&gt;
  &lt;/f-form-item&gt;
  &lt;f-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;
    &lt;f-input type=&quot;password&quot; v-model=&quot;userForm.password&quot; placeholder=&quot;请输入密码&quot; /&gt;
  &lt;/f-form-item&gt;
&lt;/f-form&gt;

&lt;script&gt;
export default {
  data() {
    return {
      userForm: {
        username: &#39;&#39;,
        password: &#39;&#39;
      },
      rules: {
        username: [
          {required: true, message: &#39;请输入用户名&#39;}
        ],
        password: [
          {required: true, message: &#39;请输入密码&#39;}
        ]
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<p>从内而外实现，从input开始，然后form-item，最后form，话不多说开搞</p>
<h3 id="f-input"><a href="#f-input" class="headerlink" title="f-input"></a>f-input</h3><p>首先来输入框，你可能会觉着这东西很简单，但是不要忘了我们之前说的，子组件不能直接修改prop接收的值，所以赶紧抛弃你直接v-model绑定prop的想法。</p>
<p>如果你不关闭警告你会看到这样的警告</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427103333-9.png" alt="QQ截图20210427103333-9"></p>
<p>这里你需要知道，其实v-model是一个语法糖，下面这两行其实作用是一样的</p>
<pre><code class="html">1&lt;input v-model=&quot;username&quot; /&gt;
&lt;br/&gt;
2&lt;input :value=&quot;username&quot; @input=&quot;username = $event.target.value&quot; /&gt;
&lt;br/&gt;
{{username}}
</code></pre>
<p>运行一下看下结果</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427104125-10.gif" alt="QQ录屏20210427104125-10"></p>
<p>所以在f-input中你可以这样来实现绑定的传递</p>
<pre><code class="html">&lt;template&gt;
  &lt;div&gt;
    &lt;input :value=&quot;value&quot; @input=&quot;inputHandler&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    props: {
      value: {
        type: String,
        default: &#39;&#39;
      }
    },
    methods: {
      inputHandler(e) {
        this.$emit(&#39;input&#39;, e.target.value)
      }
    }
  }
&lt;/script&gt;
</code></pre>
<p>这时候再去试试，发现已经可以了，控制台也没有报警告</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427104853-11.gif" alt="QQ录屏20210427104853-11"></p>
<p>然后你又发现了一个问题，设置的<code>placeholder</code>没有生效，因为他被添加到f-input上，而不是f-input里面的input上</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427105208-12.png" alt="QQ截图20210427105208-12"></p>
<p>官网<a href="https://cn.vuejs.org/v2/api/#inheritAttrs" target="_blank" rel="noopener">API文档</a>有这么一段</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427105342-13.png" alt="QQ截图20210427105342-13"></p>
<p>它的作用总结下来就是，如果开启此选项，父组件绑定的属性没有被props接收的，将会存在$attrs里面，可以使用v-bind将$attrs绑定在任意非根组件上，然后把我们的f-input稍加改造</p>
<pre><code class="html">&lt;template&gt;
  &lt;div&gt;
    &lt;input :value=&quot;value&quot; @input=&quot;inputHandler&quot; v-bind=&quot;$attrs&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    inheritAttrs: true,
    // 省略部分代码
&lt;/script&gt;
</code></pre>
<p>完美，可以看到设置的密码型输入框也已经生效了</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427105835-14.gif" alt="QQ录屏20210427105835-14"></p>
<h3 id="f-form-item"><a href="#f-form-item" class="headerlink" title="f-form-item"></a>f-form-item</h3><p>到这里就比上面的输入框稍微有点难度了，但也很简单，这里需要实现的点是</p>
<ul>
<li>label文本</li>
<li>给表单组件预留插槽</li>
<li>按规则校验并提示错误</li>
</ul>
<p>前两点都很简单，你应该比较畏惧第三点，其实这个也很简单，有现成的“轮子”——<a href="https://www.npmjs.com/package/async-validator" target="_blank" rel="noopener">async-validator</a>，作为程序员要杜绝重复造轮子😂</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427112200-15.png" alt="QQ截图20210427112200-15"></p>
<p>想一下我们之前的用例中form-item的属性：label和prop，然后配置要接收的参数</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;label v-if=&quot;label&quot;&gt;{{label}}&lt;/label&gt;
    &lt;slot&gt;&lt;/slot&gt;
    &lt;p v-if=&quot;errorMessage&quot;&gt;{{errorMessage}}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    props: {
      label: {
        type: String,
        default: &#39;&#39;
      },
      prop: {
        type: String,
      }
    },
    data() {
      return {
        errorMessage: &#39;&#39;
      }
    },
  }
&lt;/script&gt;
</code></pre>
<p>这样我们第一步和第二步都完成了，接下来就是validate了，接受的prop的作用就是为了从form组件中绑定的rules中获取需要使用的验证规则，同时也使用prop从form绑定的表单内容中获取当前表单项的值。这里可以使用provide/inject来传递数据</p>
<pre><code class="vue">&lt;script&gt;
import Schema from &#39;async-validator&#39;
  export default {
    inject: [&#39;form&#39;],
    props: {
      label: {
        type: String,
        default: &#39;&#39;
      },
      prop: {
        type: String,
      }
    },
    data() {
      return {
        errorMessage: &#39;&#39;
      }
    },
    methods: {
      validate() {
        const rule = this.form.rules[this.prop]
        const value = this.form.model[this.prop]
        // 获取验证规则实例
        const description = {[this.prop]: rule}
        const schema = new Schema(description)

        // 使用验证规则实例的验证方法
        return schema.validate({[this.prop]: value}, (error, field) =&gt; {
          if(error) {
            this.errorMessage = error[0].message
            console.log(`${field}验证未通过`);
          } else {
            this.errorMessage = &#39;&#39;
          }
        })
      }
    },
  }
&lt;/script&gt;
</code></pre>
<p>然后添加验证事件的监听器，在内部表单项值修改时动态验证</p>
<pre><code class="vue">mounted() {
    this.$on(&#39;validate&#39;, this.validate)
}
</code></pre>
<p>再顺便修改一下f-input的内容</p>
<pre><code class="vue">methods: {
  inputHandler(e) {
    this.$emit(&#39;input&#39;, e.target.value)
    // 通知验证
    this.$parent.$emit(&#39;validate&#39;)
  }
}
</code></pre>
<p>OK~~form-item齐活</p>
<h3 id="f-form"><a href="#f-form" class="headerlink" title="f-form"></a>f-form</h3><p>在完成了form-item和input组件之后，form组件就简简单单了，再来看一下form要做的事</p>
<ul>
<li>接收验证规则和表单数据</li>
<li>给form-item预留插槽</li>
<li>全局校验方法</li>
</ul>
<p>首先我们来实现前两步，很简单，不要忘了之前form-item使用inject接收的数据，这里需要绑定上</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    provide() {
      return {
        form: this
      }
    },
    props: {
      model: {
        type: Object,
        required: true
      },
      rules: {
        type: Object
      }
    }
  }
&lt;/script&gt;
</code></pre>
<p>接下来全局的校验，接受一个回调函数，回调函数的参数是一个布尔值，代表校验是否通过，使用Promise.all来执行多个验证器，只要有失败的就返回false</p>
<pre><code class="javascript">methods: {
  validate(cb) {
    const validators = this.$children
    .filter(item =&gt; item.prop)
    .map(item =&gt; item.validate())

    Promise.all(validators)
    .then(() =&gt; cb(true))
    .catch(() =&gt; cb(false))
  }
},
</code></pre>
<p>然后在修改一下用例，添加一个提交按钮，绑定全局校验</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;f-form :model=&quot;userForm&quot; :rules=&quot;rules&quot; ref=&quot;formRef&quot;&gt;
      &lt;f-form-item label=&quot;用户名&quot; prop=&quot;username&quot;&gt;
        &lt;f-input v-model=&quot;userForm.username&quot; placeholder=&quot;请输入用户名&quot; /&gt;
      &lt;/f-form-item&gt;
      &lt;f-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;
        &lt;f-input type=&quot;password&quot; v-model=&quot;userForm.password&quot; placeholder=&quot;请输入密码&quot; /&gt;
      &lt;/f-form-item&gt;
      &lt;button @click=&quot;submit&quot;&gt;提交&lt;/button&gt;
    &lt;/f-form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  // 省略部分代码
  methods: {
    submit() {
      this.$refs.formRef.validate(valid =&gt; {
        if(valid) {
          console.log(&#39;通过验证&#39;);
        } else {
          console.log(&#39;验证失败&#39;);
        }
      })
    }
  },
}
&lt;/script&gt;
</code></pre>
<p>到现在我们就已经<strong>粗略</strong>的完成了一套form组件，当然他的功能并不止于此，这只是起了个头具体功能完善也就不在这里细说了，效果展示如下，样式细节也不在这里扣了</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427164449-16.gif" alt="QQ录屏20210427164449-16"></p>
<h2 id="实战二，Message组件"><a href="#实战二，Message组件" class="headerlink" title="实战二，Message组件"></a>实战二，Message组件</h2><p>上一节我们实现了写在模板里面的组件，还有一种组件比如message消息提示，它的使用要求比较灵活，不确定在什么组件中出现，所以不能写死在模板中，要使用js动态控制</p>
<p>这种组件就需要手动地实现挂载与卸载了，在开始之前需要做一下铺垫<a href="https://cn.vuejs.org/v2/api/#Vue-extend" target="_blank" rel="noopener">Vue.extend(options)</a>，创建一个子类包含配置的选项</p>
<p>首先我们来构建一个消息的模板</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div class=&quot;message&quot;&gt;
    &lt;p&gt;{{ message }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: &quot;message&quot;,
  data() {
    return {
      message: &quot;message&quot;,
    };
  },
&lt;/script&gt;
</code></pre>
<p>然后再创建一个Message.js，用于渲染这个模板</p>
<pre><code class="javascript">import Vue from &#39;vue&#39;;
import Message from &#39;./Message.vue&#39;

export default function() {
  const MessageConstructor = Vue.extend(Message)

  const component = new MessageConstructor().$mount()
  document.body.appendChild(component.$el)
}
</code></pre>
<p>上面的最后一段代码，我们调用了 <code>$mount</code> 方法对组件进行了手动渲染，这里渲染之后的结果是一个Node节点，我们需要手动将它插入到document中</p>
<p>使用组件也很简单，导入并执行这个函数。我们来使用一个按钮触发这个消息渲染</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;button @click=&quot;alert&quot;&gt;消息&lt;/button&gt;    
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import Message from &#39;./Message.js&#39;
  export default {
    methods: {
      alert() {
        Message()
      }
    }
  }
&lt;/script&gt;
</code></pre>
<p>来看下效果</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210427174737-19.png" alt="QQ截图20210427174737-19"></p>
<p>还行，我们来继续完善一下，首先需要自动删除节点，我们要在出现提示之后一定时间内取消展示，思路也很简单，在mounted之后添加一个延时卸载Node节点的方法</p>
<pre><code class="javascript">mounted() {
    setTimeout(() =&gt; {
        // duration 后通过父级移除子元素的方式移除该组件实例和DOM节点
        this.$destroy(true);
        this.$el.parentNode.removeChild(this.$el);
    }, this.duration);
},
</code></pre>
<p>现在我们来考虑一下通过配置控制消息内容</p>
<ol>
<li>调用组件时传入一个配置对象</li>
<li>在创建渲染实例时将参数传递进去，覆盖掉继承来的属性</li>
</ol>
<p>对我们的Message.js稍加改造，让参数覆盖data选项</p>
<pre><code class="javascript">export default function(options) {
  const MessageConstructor = Vue.extend(Message)

  const component = new MessageConstructor({data: options}).$mount()
  document.body.appendChild(component.$el)
}
</code></pre>
<p>然后我们来使用一下，配合我们之前的表单校验一起试一下</p>
<pre><code class="vue">&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;f-form :model=&quot;userForm&quot; :rules=&quot;rules&quot; ref=&quot;formRef&quot;&gt;
      &lt;f-form-item label=&quot;用户名&quot; prop=&quot;username&quot;&gt;
        &lt;f-input v-model=&quot;userForm.username&quot; placeholder=&quot;请输入用户名&quot; /&gt;
      &lt;/f-form-item&gt;
      &lt;f-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;
        &lt;f-input type=&quot;password&quot; v-model=&quot;userForm.password&quot; placeholder=&quot;请输入密码&quot; /&gt;
      &lt;/f-form-item&gt;
      &lt;button @click=&quot;submit&quot;&gt;提交&lt;/button&gt;
    &lt;/f-form&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import FFormItem from &#39;./components/FFormItem.vue&#39;
import FInput from &#39;./components/FInput.vue&#39;
import FForm from &#39;./components/FForm.vue&#39;
import Message from &#39;./components/Message&#39;

export default {
  name: &#39;App&#39;,
  components: {
    FFormItem,FInput,FForm
  },
  data() {
    return {
      userForm: {
        username: &#39;&#39;,
        password: &#39;&#39;
      },
      rules: {
        username: [
          {required: true, message: &#39;请输入用户名&#39;, tigger: &#39;blur&#39;}
        ],
        password: [
          {required: true, message: &#39;请输入密码&#39;, tigger: &#39;blur&#39;}
        ]
      },
      username: &#39;&#39;
    }
  },
  methods: {
    submit() {
      this.$refs.formRef.validate(valid =&gt; {
        if(valid) {
          Message({
            message: &#39;通过验证&#39;,
            duration: 5000
          })
        } else {
          Message({
            message: &#39;验证失败&#39;,
            duration: 2000
          })
        }
      })
    },
  },
}
&lt;/script&gt;
</code></pre>
<p>可以看到时间、内容都已经生效了</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427180232-20.gif" alt="QQ录屏20210427180232-20"></p>
<p>然后为了使用方便我们可以在入口文件将Message挂载到Vue的原型上<code>Vue.prototype.$message = Message</code>，，然后其他组件内部再使用时就可以直接this.$message()</p>
<p>这里我们只实现了一个简单的message，他还可以有很多扩展方向，比如通知类型（根据类型控制message颜色样式不一样）或者内嵌icon等，我们在这就不说了，有了这个结构再去拓展就很简单了</p>
<h2 id="实战三，树形组件和动态组件"><a href="#实战三，树形组件和动态组件" class="headerlink" title="实战三，树形组件和动态组件"></a>实战三，树形组件和动态组件</h2><p>之前我们介绍了两种类型的组件封装，现在我们来说一下另外一种组件，递归组件。这种组件可用于列表展开、树形表格等</p>
<h3 id="递归组件"><a href="#递归组件" class="headerlink" title="递归组件"></a>递归组件</h3><p>我们在使用组件时一般都是先使用import导入，然后在components选项中声明，最后在组件中使用；但其实还有一种使用组件的方法，当组件声明了选项name之后就可以使用name调用自身了，这也是递归组件的原理</p>
<p>但是不可以直接使用，需要有一个限制条件，不然就会调用栈溢出了，比如下面这样</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20210427215454844.png" alt="image-20210427215454844"></p>
<p>我们来实现一个简易的树形组件，用来展开和闭合列表</p>
<p>首先我们来创建一个模板</p>
<pre><code class="vue">&lt;template&gt;
  &lt;li&gt;
    &lt;div @click=&quot;toggle&quot;&gt;
      {{model.title}}
      &lt;span v-if=&quot;isFolder&quot;&gt;[{{open ? '-' : '+'}}]&lt;/span&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/template&gt;
</code></pre>
<p>这里只是做示范，在使用外层需要有个ul包裹，当有子组件时会显示<code>+</code>和<code>-</code>，展开式显示<code>-</code>，关闭时显示<code>+</code>，isFolder就是一个计算属性，用来判断有没有子组件，通过事件来控制open的开闭</p>
<pre><code class="javascript">export default {
  name: &quot;Tree&quot;,
  props: {
    model: {
      type: Object,
      required: true,
    },
  },
  data() {
    return { 
      open: false 
    };
  },
    computed: {
    isFolder() {
      return this.model.children &amp;&amp; this.model.children.length;
    }
  },
  methods: {
    toggle() {
      if (this.isFolder) {
        this.open = !this.open;
      }
    },
  },
};
</code></pre>
<p>我们来添加一下数据来试一下效果</p>
<pre><code class="vue">&lt;template&gt;
  &lt;ul&gt;
    &lt;tree v-for=&quot;(model, index) in treeData&quot; :key=&quot;index&quot; :model=&quot;model&quot;&gt;&lt;/tree&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
    export default {
    data() {
      return {
        treeData: [
        {
          title: &#39;打野&#39;,
          children: [
            {
              title: &#39;刺客&#39;,
              children: [
                {
                  title: &#39;兰陵王&#39;
                },{
                  title: &#39;李白&#39;
                }
              ]
          // ……省略大段数据代码
      }
    }
  }
&lt;/script&gt;
</code></pre>
<p>现在的效果是这样的</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20210427230021328.png" alt="image-20210427230021328"></p>
<p>接下来我们就来注入灵魂，实现组件递归，将tree组件做一下修改</p>
<pre><code class="vue">&lt;template&gt;
  &lt;li&gt;
    &lt;div @click=&quot;toggle&quot;&gt;
      {{model.title}}
      &lt;span v-if=&quot;isFolder&quot;&gt;[{{open ? '-' : '+'}}]&lt;/span&gt;
    &lt;/div&gt;
    &lt;ul v-show=&quot;open&quot; v-if=&quot;isFolder&quot;&gt;
      &lt;tree class=&quot;item&quot; v-for=&quot;model in model.children&quot; :model=&quot;model&quot; :key=&quot;model.title&quot;&gt;&lt;/tree&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/template&gt;
</code></pre>
<p>然后再看效果</p>
<p><img src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ录屏20210427230225.gif" alt="QQ录屏20210427230225"></p>
<p>完成，当然这只是粗略版本，这样拿出去肯定是用不了的，还需要拓展功能调整样式</p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2021/05/05/技术/回头再看跨域/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20210505155318631.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/image-20210505155318631.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                回头再看——跨域</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2021/04/22/技术/canvas/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210420171530.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://gitee.com/liuhao1108/picGoCDN/raw/master/img/QQ截图20210420171530.png">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                canvas入门</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "AdzOvpXTwwf3KAX23DOds5C9-gzGzoHsz",
        appKey: "olX1MHfMtrQcmemwl5lLmu4a",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg" itemprop="image" alt="小枫" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author">小枫</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>前端小白</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 小枫<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy2020 | <a href="http://beian.miit.gov.cn">鲁ICP备19019592号-2</a></p>
    </div>
    <div class="footer-device">
      <p style="font-family: 'Ubuntu', sans-serif;">
        
        <script src="/libsuanzi.pure.js"></script>
        
        
        
        
        <span id="busuanzi_container_site_pv" style="display:none">
          本站总访问量<span id="busuanzi_value_site_pv"></span>次
          <span class="post-meta-divider">|</span>
        </span>
        <span id="busuanzi_container_site_uv" style='display:none'>
          本站访客数<span id="busuanzi_value_site_uv"></span>人
        </span>
        
      </p>
      <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i
            class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a
            href="https://2heng.xin/" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a
            href="https://www.hojun.cn/" target="_blank"
            style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo,
          Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>





<!-- <script src="/js/tocbot.js"></script> -->
<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js"></script>

<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
  /* <![CDATA[ */
  if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
    var Poi = { "pjax": "1", "movies": { "url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2", "name": "Unbroken.mp4", "live": "close" }, "windowheight": "fixed", "codelamp": "close", "ajaxurl": "", "order": "asc", "formpostion": "bottom" };
  } else {
    var Poi = { "pjax": "1", "movies": { "url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2", "name": "Unbroken.mp4", "live": "open" }, "windowheight": "auto", "codelamp": "close", "ajaxurl": "", "order": "asc", "formpostion": "bottom" };
  }
/* ]]> */

</script>
<script>
  $(document).ready(function () {
    if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
      if ($(".pattern-center").length > 0) { //有图的情况
        tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
        });
      } else {
        tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
        });
      }
      var offsetTop = $('.toc').offset().top - 95;
      window.onscroll = function () {
        var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop >= offsetTop) {
          $('.toc').addClass('toc-fixed');
        } else {
          $('.toc').removeClass('toc-fixed');
        }
      }
    }
  });
</script>
    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/fengjing95/cdn@1.2/img/custom/avatar.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">沿途の枫景</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="https://github.com/Fengjing95" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://weibo.com/5056791657/profile?is_all=1" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=1984779164&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/笔记/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  笔记
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>